<div *ngIf="planet">
  <mat-card>
    <mat-card-header class="card-header">
      <mat-card-title>{{ planet.name }}</mat-card-title>
      <button
        mat-mini-fab
        *ngIf="isCaptain"
        color="primary"
        (click)="toggleEditMode()"
      >
        <mat-icon>{{ isEditMode ? "check" : "edit" }}</mat-icon>
      </button>
    </mat-card-header>

    <img
      mat-card-image
      [src]="planet.imageUrl"
      loading="lazy"
      alt="{{ planet.name }}"
    />

    <mat-card-content>
      <ng-container *ngIf="!isEditMode">
        <p><strong>Status:</strong> {{ planet.status || "-" }}</p>
        <p>{{ planet.description || "no description yet" }}</p>
      </ng-container>

      <ng-container *ngIf="isEditMode">
        <app-planet-detail-form
          [planet]="planet"
          (planetUpdated)="updatePlanet($event)"
        />
      </ng-container>

      <ng-container *ngIf="planet.exploredByTeam">
        <h3>Team Info</h3>
        <p>
          <strong>Captain:</strong> {{ planet.exploredByTeam.captain.name }}
        </p>

        <mat-list *ngIf="planet.exploredByTeam.robots?.length">
          <mat-chip *ngFor="let robot of planet.exploredByTeam.robots">
            <div class="robot-chip">
              <mat-icon>smart_toy</mat-icon>
              <span>{{ robot.robotNumber }}</span>
            </div>
          </mat-chip>
        </mat-list>
      </ng-container>
    </mat-card-content>
  </mat-card>
</div>
